<!DOCTYPE html>
<html>
	<style>body{margin:0;background:#444444;}<style>
	<script src="https://simplewebrtc.com/simplewebrtc.bundle.js"></script>
	<body onhashchange="if(location.hash.slice(1)){webrtc.joinRoom(location.hash.slice(1));document.forms[0].hidden=true}">
		<form onsubmit="webrtc.createRoom(this.room.value, function(err, name){location.hash=name});return false"><input name="room" placeholder="Room Name"/><input type="submit" value="create"/></form>
		<video controls style="position:fixed;bottom:0;right:0;width:20%"></video>
		<script>
			var webrtc = new SimpleWebRTC({localVideoEl: document.querySelector('video'),autoRequestMedia: true});
			webrtc.on('readyToCall', document.body.onhashchange);
			webrtc.on('videoAdded', function (video, peer) {
				console.log('peer added', peer);
				video.id=webrtc.getDomId(peer);
				document.body.appendChild(video);
				peer.pc.on('iceConnectionStateChange', console.log);
			});
			webrtc.on('videoRemoved', function (video, peer) {
				console.log('video removed ', peer);
				document.body.removeChild(document.getElementById(webrtc.getDomId(peer)));
			});
		</script>
	</body>
</html>
